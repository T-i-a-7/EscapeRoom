<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Escape Room: Protocollo Genesi</title>
  <!-- Impostazione viewport per dispositivi mobili -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- Font usati per titoli, testi e timer -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;500;700&family=Kodemono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="gameContainer">
    
    <!-- TIMER GLOBALE (nascosto nelle schermate iniziali) -->
    <div id="globalTimer" class="timer" style="display: none;">
      <div class="timer-label">TEMPO RIMASTO</div>
      <div class="timer-value" id="timeRemaining">20:00</div>
    </div>

    <!-- SCREEN 1: INTRO - Storia Parte 1 -->
    <section class="screen active" id="screen_intro_part1">
      <div class="content">
        <h1 class="title-main">Protocollo Genesi</h1>
        <h1 class="title-sub">Escape Room</h1>
        <p>
          Anno 2097. Il mondo è sull’orlo del collasso a causa di una mutazione del virus 
          <strong>HF-97</strong>, un ceppo patogeno letale che ha reso inutili tutte le precedenti vaccinazioni.
        </p>
        <p>
          Le strutture governative sono crollate, e le città sono diventate zone di quarantena abbandonate. I vaccini esistenti non funzionano più.
        </p>
        <p>
          Negli archivi segreti della <strong>BioShield Corporation</strong>, ormai in rovina, è custodito il <em>Protocollo Genesi</em>, l’unico progetto in grado di sviluppare un vaccino universale per fermare l’epidemia.
        </p>
        <!-- Pulsante per passare alla parte successiva della storia -->
        <button id="btn_next_intro1" class="btn next-button">Avanti</button>
      </div>
    </section>

    <!-- SCREEN 2: INTRO - Storia Parte 2 -->
    <section class="screen" id="screen_intro_part2">
      <!-- Pulsante "Indietro" per tornare alla parte 1 -->
      <button id="btn_back_intro2" class="btn back-button">Indietro</button>
      <div class="content">
        <p>
          La strada per accedere a questi dati è tutt’altro che semplice. Il bunker della BioShield è protetto da sistemi di sicurezza avanzati, enigmi crittografati e IA difensive. In più, i <em>Purificatori</em>, estremisti anti-scienza, vogliono distruggere tutte le informazioni sui vaccini.
        </p>
        <p>
          Voi siete un gruppo di ex ricercatori e hacker, gli ultimi superstiti del <strong>Progetto Genesi</strong>. Il vostro obiettivo è infiltrarvi nel bunker, decifrare i documenti crittografati e ricostruire la formula di un vaccino universale prima che il virus muti ancora.
        </p>
        <p>
          <em>Attenzione:</em> il tempo scorre inesorabile e ogni errore potrebbe costarvi caro...
        </p>
        <!-- Pulsante per passare alle Istruzioni -->
        <button id="btn_next_intro2" class="btn next-button">Avanti</button>
      </div>
    </section>

    <!-- SCREEN 3: ISTRUZIONI & REGOLE -->
    <section class="screen" id="screen_instructions">
      <!-- Pulsante "Indietro" per tornare alla storia Parte 2 -->
      <button id="btn_back_instructions" class="btn back-button">Indietro</button>
      <div class="content">
        <h2>Istruzioni e Regole</h2>
        <p>
          <strong>Tempo limite:</strong> Avrai <em>20 minuti</em> per completare la missione e ritrovare il Protocollo Genesi.
        </p>
        <p>
          Dovrai superare <strong>10 prove</strong>, ognuna legata a un aspetto scientifico riguardante i vaccini. Ogni prova sbloccata fornisce nuove informazioni fondamentali.
        </p>
        <ul>
          <li>Ogni errore può comportare penalità di tempo o un blocco temporaneo.</li>
          <li>Se il tempo si esaurisce prima di finire tutte le prove, la missione fallisce.</li>
        </ul>
        <p>
          Buona fortuna! La salvezza dell’umanità è nelle tue mani...
        </p>
        <!-- Pulsante per passare alla selezione della difficoltà -->
        <button id="btn_next_instructions" class="btn next-button">Avanti</button>
      </div>
    </section>

    <!-- SCREEN 4: SELEZIONE DIFFICOLTÀ -->
    <section class="screen" id="screen_difficulty">
      <!-- Pulsante "Indietro" per tornare alle istruzioni -->
      <button id="btn_back_difficulty" class="btn back-button">Indietro</button>
      <div class="content">
        <h2>Seleziona la Difficoltà</h2>
        <p>Scegli il livello di gioco adatto a te:</p>
        <div class="difficulty-options">
          <button class="btn difficulty-button" data-difficulty="media">Scuola Media</button>
          <button class="btn difficulty-button" data-difficulty="superiore">Scuola Superiore</button>
        </div>
      </div>
    </section>
    
    <!-- SCREEN 5: GIOCO 1 (SUPERIORE) - IL CODICE DEL DNA -->
    <section class="screen" id="screen_game1_superior">
      <div class="content">
        <h2>Il Codice del DNA</h2>
        <p>Trascina le parole nella colonna corretta.</p>
        <p class="instruction-note">Premi e trascina nella zona vuota per spostare i blocchi.</p>
        <!-- Contenitore per le parole (word bank) e per le drop zones -->
        <div id="wordBank" class="word-bank"></div>
        <div class="drop-zones">
          <div class="dropzone" id="dropzone_correct"><h3>Parole Corrette</h3></div>
          <div class="dropzone" id="dropzone_incorrect"><h3>Parole Errate</h3></div>
        </div>
        <div id="game1Message" class="message"></div>
        <button id="btn_submit_game1" class="btn next-button">Conferma</button>
      </div>
    </section>
    
    <!-- SCREEN 6: GIOCO 2 (SUPERIORE) - IL SISTEMA IMMUNITARIO -->
    <section class="screen" id="screen_game2_superior">
      <div class="content">
        <h2>Il Sistema Immunitario</h2>
        <p>Ordina le carte nelle posizioni corrette:</p>
        <!-- Contenitore degli slot (fissi, da 1 a 6) -->
        <div class="card-slots">
          <div class="card-slot" data-slot="1"></div>
          <div class="card-slot" data-slot="2"></div>
          <div class="card-slot" data-slot="3"></div>
          <div class="card-slot" data-slot="4"></div>
          <div class="card-slot" data-slot="5"></div>
          <div class="card-slot" data-slot="6"></div>
        </div>
        <!-- Contenitore per le carte da trascinare -->
        <div id="cardsContainer" class="cards-container"></div>
        <div id="game2Message" class="message"></div>
        <button id="btn_submit_game2" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN 7: DOCUMENTO BIOSHIELD -->
    <section class="screen" id="screen_document">
      <div class="content">
        <h2>Documento BioShield</h2>
        <p>Hai raccolto un documento da terra che ha catturato la tua attenzione.</p>
        <p class="instruction-note">Leggi attentamente e memorizza le informazioni. Potrebbero tornare utili!</p>
        <p class="document-text">
          Il presente documento riassume i principali eventi storici riguardanti lo sviluppo dei vaccini:<br><br>
          <strong>1796</strong> – Scoperta della vaccinazione contro il vaiolo da parte di Edward Jenner.<br>
          <strong>1885</strong> – Louis Pasteur sviluppa i primi vaccini attenuati contro rabbia e antrace.<br>
          <strong>1955</strong> – Viene sviluppato il primo vaccino contro la poliomielite.<br>
          <strong>1967</strong> – L’OMS lancia un programma globale per l’eradicazione del vaiolo.<br>
          <strong>1980</strong> – Il vaiolo viene dichiarato ufficialmente eradicato.<br>
          <strong>2020</strong> – I primi vaccini a mRNA vengono sviluppati per affrontare una pandemia globale.<br><br>
        </p>
        <button id="btn_doc_continue" class="btn next-button">Avanti</button>
      </div>
    </section>

    <!-- SCREEN 8: GIOCO 3 - MATCHING EVENT & DATE -->
    <section class="screen" id="screen_game3">
      <div class="content">
        <h2>Il Laboratorio Abbandonato</h2>
        <p>Associa ogni evento alla sua data corretta:</p>
        <!-- Contenitore dinamico per gli slot degli eventi -->
        <div class="event-slots"></div>
        <!-- Contenitore per le carte con le date -->
        <div id="datesContainer" class="dates-container"></div>
        <div id="game3Message" class="message"></div>
        <button id="btn_submit_game3" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN 9: GIOCO 4 - ARCHIVIO SEGRETO (DOMANDE CON GRAFICI) -->
    <section class="screen" id="screen_graph1">
      <div class="content">
        <h2>Archivio Segreto: Domanda 1</h2>
        <div class="game4-container">
          <div class="graph-container">
            <img src="img/IMG_0904.JPG" alt="Grafico 1">
          </div>
          <div class="question-container">
            <p>Dopo l’inizio delle vaccinazioni, l’eccesso di mortalità negli over 85 è aumentato rispetto al periodo precedente.</p>
            <div class="answer-buttons">
              <button class="btn answer-btn" data-answer="vero">Vero</button>
              <button class="btn answer-btn" data-answer="falso">Falso</button>
            </div>
            <div id="game4Msg1" class="message"></div>
            <button id="btn_next_graph1" class="btn next-button">Avanti</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SCREEN 10: GIOCO 4 - DOMANDA 2 -->
    <section class="screen" id="screen_graph2">
      <div class="content">
        <h2>Archivio Segreto: Domanda 2</h2>
        <div class="game4-container">
          <div class="graph-container">
            <img src="img/IMG_0905.JPG" alt="Grafico 2">
          </div>
          <div class="question-container">
            <p>Nella campagna vaccinale, la popolazione con più di 80 anni è stata tra le prime fasce d’età a ricevere almeno una dose di vaccino.</p>
            <div class="answer-buttons">
              <button class="btn answer-btn" data-answer="vero">Vero</button>
              <button class="btn answer-btn" data-answer="falso">Falso</button>
            </div>
            <div id="game4Msg2" class="message"></div>
            <button id="btn_next_graph2" class="btn next-button">Avanti</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SCREEN 11: GIOCO 4 - DOMANDA 3 -->
    <section class="screen" id="screen_graph3">
      <div class="content">
        <h2>Archivio Segreto: Domanda 3</h2>
        <div class="game4-container">
          <div class="graph-container">
            <img src="img/IMG_0906.JPG" alt="Grafico 3">
          </div>
          <div class="question-container">
            <p>Dopo l’introduzione della vaccinazione obbligatoria contro il vaiolo, non ci sono più state epidemie significative di questa malattia.</p>
            <div class="answer-buttons">
              <button class="btn answer-btn" data-answer="vero">Vero</button>
              <button class="btn answer-btn" data-answer="falso">Falso</button>
            </div>
            <div id="game4Msg3" class="message"></div>
            <button id="btn_submit_graph3" class="btn next-button">Conferma</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SCREEN 12: GIOCO 5 - LA FUGA -->
    <section class="screen" id="screen_escape">
      <div class="content">
        <h2>La Fuga</h2>
        <p>
          Il server centrale è bloccato e il backup non autorizzato. Per attivare il backup e fuggire, devi calcolare la soglia di copertura vaccinale (V<sub>c</sub>) necessaria per fermare la diffusione del virus.
        </p>
        <p class="formula">Formula dell'immunità di gregge: V<sub>c</sub> = 1 - (1/R<sub>0</sub>)</p>
        <div class="scenario">
          <h3>Scenario 1: Influenza stagionale (R₀ = 1.3)</h3>
          <p>Calcola V<sub>c</sub> = 1 - (1/1.3). Inserisci la percentuale minima richiesta:</p>
          <input type="range" id="slider1" min="0" max="100" value="0">
          <span id="slider1Value">0%</span>
        </div>
        <div class="scenario">
          <h3>Scenario 2: Morbillo (R₀ = 18)</h3>
          <p>Calcola V<sub>c</sub> = 1 - (1/18). Inserisci la percentuale minima richiesta:</p>
          <input type="range" id="slider2" min="0" max="100" value="0">
          <span id="slider2Value">0%</span>
        </div>
        <div id="game5Message" class="message"></div>
        <button id="btn_submit_game5" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN 13: GIOCO 1 (MEDIE) - IL CODICE DEL DNA (BUTTON PUZZLE) -->
    <section class="screen" id="screen_game1_media">
      <div class="content">
        <h2>Il Codice del DNA</h2>
        <p class="instruction-note">Ricorda: A si abbina a T e C si abbina a G.</p>
        <p>In ogni colonna, una cella è già riempita; clicca sulla cella vuota per scegliere la lettera complementare corretta.</p>
        <div id="mediaGrid" class="media-grid"></div>
        <div id="mediaGameMessage" class="message"></div>
        <button id="btn_confirm_media" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN 14: GIOCO 2 (MEDIE) - ORDINA I TERMINI -->
    <section class="screen" id="screen_game2_media">
      <div class="content">
        <h2>Ordina i Termini</h2>
        <p class="instruction-note">Trascina le carte nell'ordine corretto per ottenere una sequenza logica.</p>
        <div class="card-slots">
          <div class="card-slot" data-slot="1"></div>
          <div class="card-slot" data-slot="2"></div>
          <div class="card-slot" data-slot="3"></div>
          <div class="card-slot" data-slot="4"></div>
        </div>
        <div id="cardsContainerMedia" class="cards-container"></div>
        <div id="game2MediaMessage" class="message"></div>
        <button id="btn_submit_game2_media" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN 15: DOCUMENTO BIOSHIELD (MEDIE) -->
    <section class="screen" id="screen_document_media">
      <div class="content">
        <h2>Documento BioShield</h2>
        <p>Hai raccolto un documento che contiene informazioni chiave per il prossimo step.</p>
        <p class="instruction-note">Leggi attentamente: le date riportate sono fondamentali.</p>
        <p class="document-text">
          Il documento riassume i principali eventi storici:<br><br>
          <strong>1900</strong> – Prima somministrazione moderna.<br>
          <strong>1950</strong> – Sviluppo dei vaccini di seconda generazione.<br>
          <strong>2000</strong> – Innovazioni tecnologiche vaccinali.<br>
          <strong>2020</strong> – Rivoluzione dei vaccini a mRNA.<br><br>
        </p>
        <button id="btn_doc_continue_media" class="btn next-button">Avanti</button>
      </div>
    </section>

    <!-- SCREEN 16: GIOCO 3 (MEDIE) - ABBINA L'EVENTO ALLA DATA -->
    <section class="screen" id="screen_game3_media">
      <div class="content">
        <h2>Abbina l'Evento alla Data</h2>
        <p>Associa ogni evento alla sua data corretta:</p>
        <!-- Contenitore per gli slot degli eventi -->
        <div class="event-slots"></div>
        <!-- Contenitore per le carte con le date -->
        <div id="datesContainerMedia" class="dates-container"></div>
        <div id="game3MediaMessage" class="message"></div>
        <button id="btn_submit_game3_media" class="btn next-button">Conferma</button>
      </div>
    </section>

    <!-- SCREEN SUCCESS: MISSIONE COMPLETATA -->
    <section class="screen" id="screen_success">
      <div class="content">
        <h2>Missione Completata!</h2>
        <p>Complimenti, hai completato con successo la missione e salvato il Protocollo Genesi!</p>
      </div>
    </section>

    <!-- SCREEN FAIL: MISSIONE FALLITA -->
    <section class="screen" id="screen_fail">
      <div class="content">
        <h2>Missione Fallita</h2>
        <p>Il tempo è scaduto! I Purificatori hanno preso il controllo del bunker e il progetto per il vaccino non è stato salvato. La missione è fallita.</p>
        <button id="btn_restart" class="btn next-button">Riprova</button>
      </div>
    </section>

  </div>
  
  <!-- Caricamento dello script JS -->
  <script src="js/script.js"></script>
</body>
</html>